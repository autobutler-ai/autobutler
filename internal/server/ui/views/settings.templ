package views

import (
	"autobutler/internal/server/ui/components/gradient_overlays"
	"autobutler/internal/server/ui/components/header"
	"autobutler/internal/server/ui/components/landing_nav"
	"autobutler/internal/server/ui/types"
)

templ Settings(pageState types.PageState) {
	{{ pageState.CurrentPageName = types.PageSettings }}
	<!DOCTYPE html>
	<html lang="en">
		@header.Component()
		<body class="landing-body">
			<main class="landing-main">
				@gradient_overlays.Component()
				<div class="landing-container">
					@landing_nav.Component(pageState)
					<div class="settings-page">
						<div class="settings-header">
							<h1>Settings & Metrics</h1>
							<div class="settings-header-actions">
								<button aria-label="Save">
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
										<path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"></path>
										<polyline points="17 21 17 13 7 13 7 21"></polyline>
										<polyline points="7 3 7 8 15 8"></polyline>
									</svg>
								</button>
								<button aria-label="Refresh">
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
										<polyline points="23 4 23 10 17 10"></polyline>
										<path d="M20.49 15a9 9 0 11-2.12-9.36L23 10"></path>
									</svg>
								</button>
							</div>
						</div>
						<div class="settings-layout">
							<aside class="settings-sidebar">
								<nav>
									<h2>Sections</h2>
									<ul>
										<li>
											<a href="#general">
												<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
													<path d="M12 15a3 3 0 100-6 3 3 0 000 6z"></path>
													<path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"></path>
												</svg>
												<span>General</span>
											</a>
										</li>
										<li>
											<a href="#users">
												<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
													<path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"></path>
													<circle cx="9" cy="7" r="4"></circle>
													<path d="M23 21v-2a4 4 0 00-3-3.87"></path>
													<path d="M16 3.13a4 4 0 010 7.75"></path>
												</svg>
												<span>Users & Access</span>
											</a>
										</li>
										<li>
											<a href="#storage">
												<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
													<ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
													<path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
													<path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
												</svg>
												<span>Storage</span>
											</a>
										</li>
										<li>
											<a href="#networking">
												<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
													<circle cx="12" cy="12" r="10"></circle>
													<line x1="2" y1="12" x2="22" y2="12"></line>
													<path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"></path>
												</svg>
												<span>Networking</span>
											</a>
										</li>
										<li>
											<a href="#security">
												<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
													<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
												</svg>
												<span>Security</span>
											</a>
										</li>
										<li>
											<a href="#opentelemetry">
												<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
													<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
												</svg>
												<span>OpenTelemetry</span>
											</a>
										</li>
										<li>
											<a href="#advanced">
												<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
													<polyline points="16 18 22 12 16 6"></polyline>
													<polyline points="8 6 2 12 8 18"></polyline>
												</svg>
												<span>Advanced</span>
											</a>
										</li>
									</ul>
								</nav>
								<div class="settings-sidebar-thanks">
									<h2>Thanks</h2>
									<a href="/thanks" class="settings-thanks-link">
										<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
											<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
										</svg>
										<span>View Thanks</span>
									</a>
								</div>
							</aside>
							<div class="settings-content">
								<section id="opentelemetry">
									<div class="settings-section-header">
										<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
											<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
										</svg>
										<h2>OpenTelemetry</h2>
									</div>
									<div class="settings-section-toolbar">
										<button>Configuration</button>
										<button>Metrics</button>
										<button>Traces</button>
										<button>Logs</button>
										<button>
											<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
												<circle cx="11" cy="11" r="8"></circle>
												<path d="M21 21l-4.35-4.35"></path>
											</svg>
											Search settings
										</button>
									</div>
								</section>
								<div class="settings-config-grid">
									<div class="settings-config-card">
										<h3>Collector & Exporter</h3>
										<p>Configure where telemetry is sent and how it's batched</p>
										<div class="settings-checkbox-group">
											<input type="checkbox" id="enable-otel"/>
											<label for="enable-otel">
												<span>Enable OpenTelemetry</span>
												<span>Toggle system-wide telemetry</span>
											</label>
										</div>
										<div class="settings-form-group">
											<label>
												<span>Endpoint</span>
												<select>
													<option>http://otel-collector:4317</option>
												</select>
											</label>
										</div>
										<div class="settings-form-group">
											<label>
												<span>Protocol</span>
												<select>
													<option>gRPC</option>
												</select>
											</label>
										</div>
										<div class="settings-form-group">
											<label>
												<span>Auth Token</span>
												<input type="password" value="••••••••••••"/>
											</label>
										</div>
										<div class="settings-form-group">
											<label>
												<span>Batch Size</span>
												<select>
													<option>512 KB</option>
												</select>
											</label>
										</div>
										<div class="settings-form-group">
											<label>
												<span>Interval</span>
												<select>
													<option>5 s</option>
												</select>
											</label>
										</div>
										<div class="settings-form-group">
											<label>
												<span>Resource Attributes</span>
												<input type="text" value="service.name=nas-app, env=prod"/>
											</label>
										</div>
										<div class="settings-card-actions">
											<button>
												<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
													<polygon points="5 3 19 12 5 21 5 3"></polygon>
												</svg>
												Test Export
											</button>
											<button>
												<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
													<path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"></path>
													<polyline points="17 21 17 13 7 13 7 21"></polyline>
													<polyline points="7 3 7 8 15 8"></polyline>
												</svg>
												Save
											</button>
											<button>
												<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
													<polyline points="1 4 1 10 7 10"></polyline>
													<polyline points="23 20 23 14 17 14"></polyline>
													<path d="M20.49 9A9 9 0 005.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 013.51 15"></path>
												</svg>
												Reset
											</button>
										</div>
									</div>
									<div class="settings-config-card">
										<h3>Filter & Sampling</h3>
										<p>Reduce noise with include/exclude rules and rates</p>
										<div class="settings-form-group">
											<label>
												<span>Sampling Rate</span>
												<select>
													<option>100% (Always)</option>
												</select>
											</label>
										</div>
										<div class="settings-form-group">
											<label>
												<span>Include Namespaces</span>
												<input type="text" value="files, storage, network"/>
											</label>
										</div>
										<div class="settings-form-group">
											<label>
												<span>Exclude Paths</span>
												<input type="text" value="/tmp, /cache"/>
											</label>
										</div>
										<div class="settings-checkbox-group">
											<input type="checkbox" id="metrics-enabled"/>
											<label for="metrics-enabled">
												<span>Metrics Enabled</span>
												<span>System metrics collection</span>
											</label>
										</div>
										<div class="settings-checkbox-group">
											<input type="checkbox" id="traces-enabled"/>
											<label for="traces-enabled">
												<span>Traces Enabled</span>
												<span>File ops spans</span>
											</label>
										</div>
										<div class="settings-checkbox-group">
											<input type="checkbox" id="logs-enabled"/>
											<label for="logs-enabled">
												<span>Logs Enabled</span>
												<span>Structured JSON logs</span>
											</label>
										</div>
									</div>
								</div>
								<section class="settings-metrics-section">
									<h3>OpenTelemetry Metrics</h3>
									<p>Live instrumentation snapshots for the NAS and file browser.</p>
									<div class="settings-metrics-grid">
										<div class="settings-metric-card">
											<div class="settings-metric-header">
												<h4>CPU Usage (%)</h4>
												<span class="settings-metric-time">
													<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
														<circle cx="12" cy="12" r="10"></circle>
														<polyline points="12 6 12 12 16 14"></polyline>
													</svg>
													Last 15m
												</span>
											</div>
											<div class="settings-metric-chart">Line chart placeholder</div>
											<div class="settings-metric-filters">
												<button>System</button>
												<button>Collector</button>
											</div>
											<table class="settings-metric-stats">
												<tbody>
													<tr>
														<td>Current</td>
														<td>32%</td>
													</tr>
													<tr>
														<td>Peak</td>
														<td>77%</td>
													</tr>
													<tr>
														<td>Avg</td>
														<td>28%</td>
													</tr>
												</tbody>
											</table>
										</div>
										<div class="settings-metric-card">
											<div class="settings-metric-header">
												<h4>Memory Usage (GB)</h4>
												<span class="settings-metric-time">
													<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
														<circle cx="12" cy="12" r="10"></circle>
														<polyline points="12 6 12 12 16 14"></polyline>
													</svg>
													Last 15m
												</span>
											</div>
											<div class="settings-metric-chart">Area chart placeholder</div>
											<div class="settings-metric-filters">
												<button>Total</button>
												<button>Used</button>
												<button>Collector</button>
											</div>
											<table class="settings-metric-stats">
												<tbody>
													<tr>
														<td>Used</td>
														<td>18.2 GB</td>
													</tr>
													<tr>
														<td>Cache</td>
														<td>2.9 GB</td>
													</tr>
													<tr>
														<td>Free</td>
														<td>13.6 GB</td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
									<div class="settings-metrics-grid">
										<div class="settings-metric-card">
											<div class="settings-metric-header">
												<h4>Disk I/O (MB/s)</h4>
												<span class="settings-metric-time">Last 1h</span>
											</div>
											<div class="settings-metric-chart">Bar chart placeholder</div>
											<div class="settings-metric-filters">
												<button>Read</button>
												<button>Write</button>
											</div>
											<table class="settings-metric-stats">
												<tbody>
													<tr>
														<td>Read</td>
														<td>210 MB/s</td>
													</tr>
													<tr>
														<td>Write</td>
														<td>185 MB/s</td>
													</tr>
													<tr>
														<td>Latency</td>
														<td>4.6 ms</td>
													</tr>
												</tbody>
											</table>
										</div>
										<div class="settings-metric-card">
											<div class="settings-metric-header">
												<h4>File Ops Rate (ops/s)</h4>
												<span class="settings-metric-time">Last 1h</span>
											</div>
											<div class="settings-metric-chart">Line chart placeholder</div>
											<div class="settings-metric-filters">
												<button>Copy</button>
												<button>Move</button>
												<button>Delete</button>
											</div>
											<table class="settings-metric-stats">
												<tbody>
													<tr>
														<td>Current</td>
														<td>42 ops/s</td>
													</tr>
													<tr>
														<td>Peak</td>
														<td>120 ops/s</td>
													</tr>
													<tr>
														<td>Errors</td>
														<td>0.2%</td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
								</section>
								<section class="settings-metrics-section">
									<h3>Recent Telemetry Events</h3>
									<p>Latest exporter status, dropped spans, and warnings.</p>
									<table class="settings-events-table">
										<thead>
											<tr>
												<th>Time</th>
												<th>Message</th>
												<th>Component</th>
												<th>Level</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td>2025-04-12 10:14:03</td>
												<td>Exporter connected to http://otel-collector:4317</td>
												<td>Exporter</td>
												<td>Info</td>
											</tr>
											<tr>
												<td>2025-04-12 10:10:22</td>
												<td>Batch size adjusted to 512 KB</td>
												<td>Collector</td>
												<td>Info</td>
											</tr>
											<tr>
												<td>2025-04-12 09:58:07</td>
												<td>Transient failure, retry scheduled</td>
												<td>Exporter</td>
												<td>Warning</td>
											</tr>
										</tbody>
									</table>
									<div class="settings-events-actions">
										<button>Clear</button>
										<button>Download</button>
									</div>
								</section>
							</div>
						</div>
					</div>
				</div>
			</main>
		</body>
	</html>
}

package calendar

import (
	"autobutler/pkg/calendar"
	"autobutler/pkg/ui/components/calendar/event_editor"
	"autobutler/pkg/util/serverutil"
	"time"
)

templ Component(calendarView calendar.CalendarView, dependencies serverutil.Dependencies) {
	{{ now := time.Now() }}
	<div id="calendar" class="calendar">s
		switch calendarView {
			case calendar.CalendarViewMonth:
				@monthView(now, dependencies)
			case calendar.CalendarViewWeek:
				<p>Week View - Coming Soon</p>
			case calendar.CalendarViewDay:
				<p>Day View - Coming Soon</p>
			default:
				<p>Invalid Calendar View</p>
		}
		<dialog
			id="new-event-dialog"
			class="modal-backdrop"
			data-view-year={ now.Year() }
			data-view-month={ calendar.MonthToInt(now.Month()) }
			closedby="none"
			onclick="if (event.target === event.currentTarget) { event.currentTarget.close(); }"
		>
			@event_editor.Component()
		</dialog>
	</div>
	<script src="/public/scripts/calendar.js"></script>
}

templ ComponentWithTime(calendarView calendar.CalendarView, targetTime time.Time, dependencies serverutil.Dependencies) {
	<div id="calendar" class="calendar">
		switch calendarView {
			case calendar.CalendarViewMonth:
				@monthView(targetTime, dependencies)
			case calendar.CalendarViewWeek:
				<p>Week View - Coming Soon</p>
			case calendar.CalendarViewDay:
				<p>Day View - Coming Soon</p>
			default:
				<p>Invalid Calendar View</p>
		}
		<dialog
			id="new-event-dialog"
			class="modal-backdrop"
			data-view-year={ targetTime.Year() }
			data-view-month={ calendar.MonthToInt(targetTime.Month()) }
			closedby="none"
			onclick="if (event.target === event.currentTarget) { event.currentTarget.close(); }"
		>
			@event_editor.Component()
		</dialog>
	</div>
	<script src="/public/scripts/calendar.js"></script>
}
